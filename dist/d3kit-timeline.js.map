{"version":3,"file":"d3kit-timeline.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\n\n// Define module using Universal Module Definition pattern\n// https://github.com/umdjs/umd/blob/master/returnExports.js\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // Support AMD. Register as an anonymous module.\n    // EDIT: List all dependencies in AMD style\n    define(['d3', 'd3kit', 'labella'], factory);\n  }\n  else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    // EDIT: Pass dependencies to factory function\n    module.exports = factory(require('d3'), require('d3kit'), require('labella'));\n  }\n  else {\n    // No AMD. Set module as a global variable\n    // EDIT: Pass dependencies to factory function\n    root.d3KitTimeline = factory(root.d3, root.d3Kit, root.labella);\n  }\n}(this,\n//EDIT: The dependencies are passed to this function\nfunction (d3, d3Kit, labella) {\n  //---------------------------------------------------\n  // BEGIN code for this module\n  //---------------------------------------------------\n\n  var DEFAULT_OPTIONS = {\n    margin: {left: 40, right: 20, top: 20, bottom: 20},\n    initialWidth: 400,\n    initialHeight: 400,\n    scale: d3.time.scale(),\n    domain: undefined,\n    direction: 'right',\n    dotRadius: 3,\n    layerGap: 60,\n    labella: {},\n    keyFn: undefined,\n    timeFn: function(d){return d.time;},\n    textFn: function(d){return d.text;},\n    dotColor: '#222',\n    labelBgColor: '#222',\n    labelTextColor: '#fff',\n    linkColor: '#222',\n    labelPadding: {left: 4, right: 4, top: 3, bottom: 2},\n    textYOffset: '0.85em'\n  };\n\n  var CUSTOM_EVENTS = [\n    'dotClick',\n    'dotMouseover',\n    'dotMousemove',\n    'dotMouseout',\n    'labelClick',\n    'labelMouseover',\n    'labelMousemove',\n    'labelMouseenter',\n    'labelMouseleave',\n    'labelMouseout'\n  ];\n\n  return d3Kit.factory.createChart(DEFAULT_OPTIONS, CUSTOM_EVENTS,\n  function constructor(skeleton){\n    // alias\n    var options = skeleton.options();\n    var dispatch = skeleton.getDispatcher();\n    var layers = skeleton.getLayerOrganizer();\n\n    layers.create(['dummy', {main:['axis', 'link', 'label', 'dot']}]);\n\n    var force = new labella.Force(options.labella);\n\n    var axis = d3.svg.axis();\n\n    function rectWidth(d){\n      return d.w;\n    }\n\n    function rectHeight(d){\n      return d.h;\n    }\n\n    function timePos(d){\n      return options.scale(options.timeFn(d));\n    }\n\n    dispatch.on('resize',  visualize);\n    dispatch.on('options', visualize);\n    dispatch.on('data', visualize);\n\n    layers.get('main.axis').classed('axis', true);\n\n    function visualize(){\n      var data = skeleton.data() || [];\n\n      if(options.domain){\n        options.scale.domain(options.domain);\n      }\n      else{\n        options.scale.domain(d3.extent(data, options.timeFn))\n          .nice();\n      }\n      options.scale.range([0, (options.direction==='left' || options.direction==='right') ? skeleton.getInnerHeight() : skeleton.getInnerWidth()]);\n\n      axis.scale(options.scale);\n\n      var axisTransform;\n\n      switch(options.direction){\n        case 'right':\n          axis.orient('left');\n          axisTransform = 'translate('+(0)+','+(0)+')';\n          break;\n        case 'left':\n          axis.orient('right');\n          axisTransform ='translate('+(skeleton.getInnerWidth())+','+(0)+')';\n          break;\n        case 'up':\n          axis.orient('bottom');\n          axisTransform ='translate('+(0)+','+(skeleton.getInnerHeight())+')';\n          break;\n        case 'down':\n          axis.orient('top');\n          axisTransform = 'translate('+(0)+','+(0)+')';\n          break;\n      }\n\n      layers.get('main')\n        .attr('transform', axisTransform);\n\n      layers.get('main.axis')\n        .call(axis);\n\n      drawDots(data);\n\n      var labelTextStyle = d3Kit.helper.extend({}, options.textStyle);\n      Object.keys(labelTextStyle).forEach(function(key){\n        labelTextStyle[key] = d3.functor(labelTextStyle[key]);\n      });\n      // for backward compatibility\n      labelTextStyle.fill = labelTextStyle.fill || d3.functor(options.labelTextColor);\n\n      var dummyText = layers.get('dummy').append('text')\n        .classed('label-text', true);\n\n      var nodes = data.map(function(d){\n        var bbox = dummyText\n          .call(updateLabelText, labelTextStyle, d)[0][0]\n          .getBBox();\n        var w = bbox.width + options.labelPadding.left + options.labelPadding.right;\n        var h = bbox.height + options.labelPadding.top + options.labelPadding.bottom;\n        var node = new labella.Node(\n          timePos(d),\n          (options.direction==='left' || options.direction==='right') ? h : w,\n          d\n        );\n        node.w = w;\n        node.h = h;\n        return node;\n      });\n\n      dummyText.remove();\n\n      force.options(options.labella)\n        .nodes(nodes)\n        .compute();\n\n      drawLabels(force.nodes(), labelTextStyle);\n\n      return skeleton;\n    }\n\n    function drawDots(data){\n      var selection = layers.get('main.dot').selectAll('circle.dot')\n        .data(data, options.keyFn);\n\n      var field = (options.direction==='left' || options.direction==='right') ? 'cy' : 'cx';\n\n      selection.enter().append('circle')\n        .classed('dot', true)\n        .on('click', function(d, i){\n          dispatch.dotClick(d, i);\n        })\n        .on('mouseover', function(d, i){\n          dispatch.dotMouseover(d, i);\n        })\n        .on('mousemove', function(d, i){\n          dispatch.dotMousemove(d, i);\n        })\n        .on('mouseout', function(d, i){\n          dispatch.dotMouseout(d, i);\n        })\n        .style('fill', options.dotColor)\n        .attr('r', options.dotRadius)\n        .attr(field, timePos);\n\n      selection.transition()\n        .style('fill', options.dotColor)\n        .attr('r', options.dotRadius)\n        .attr(field, timePos);\n\n      selection.exit().remove();\n    }\n\n    function drawLabels(nodes, labelTextStyle){\n      var nodeHeight;\n      if(options.direction==='left' || options.direction==='right'){\n        nodeHeight = d3.max(nodes, rectWidth);\n      }\n      else{\n        nodeHeight = d3.max(nodes, rectHeight);\n      }\n\n      var renderer = new labella.Renderer({\n        nodeHeight: nodeHeight,\n        layerGap: options.layerGap,\n        direction: options.direction\n      });\n\n      renderer.layout(nodes);\n\n      function nodePos(d){\n        switch(options.direction){\n          case 'right':\n            return 'translate('+(d.x)+','+(d.y-d.dy/2)+')';\n          case 'left':\n            return 'translate('+(d.x + nodeHeight - d.w)+','+(d.y-d.dy/2)+')';\n          case 'up':\n            return 'translate('+(d.x-d.dx/2)+','+(d.y)+')';\n          case 'down':\n            return 'translate('+(d.x-d.dx/2)+','+(d.y)+')';\n        }\n      }\n\n      var labelBgColor = d3.functor(options.labelBgColor);\n      var linkColor = d3.functor(options.linkColor);\n\n      // Draw label rectangles\n      var selection = layers.get('main.label').selectAll('g.label-g')\n        .data(nodes, options.keyFn ? function(d){return options.keyFn(d.data);} : undefined);\n\n      var sEnter = selection.enter().append('g')\n        .classed('label-g', true)\n        .on('click', function(d, i){\n          dispatch.labelClick(d.data, i);\n        })\n        .on('mouseover', function(d, i){\n          dispatch.labelMouseover(d.data, i);\n        })\n        .on('mousemove', function(d, i){\n          dispatch.labelMousemove(d.data, i);\n        })\n        .on('mouseenter', function(d, i){\n          dispatch.labelMouseenter(d.data, i);\n        })\n        .on('mouseleave', function(d, i){\n          dispatch.labelMouseleave(d.data, i);\n        })\n        .on('mouseout', function(d, i){\n          dispatch.labelMouseout(d.data, i);\n        })\n        .attr('transform', nodePos);\n\n      sEnter\n        .append('rect')\n        .classed('label-bg', true)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .attr('width', rectWidth)\n        .attr('height', rectHeight)\n        .style('fill', function(d){return labelBgColor(d.data);});\n\n      sEnter.append('text')\n        .classed('label-text', true)\n        .call(updateLabelText, labelTextStyle, function(d){return d.data;});\n\n      var sTrans = selection.transition()\n        .attr('transform', nodePos);\n\n      sTrans.select('rect')\n        .attr('width', rectWidth)\n        .attr('height', rectHeight)\n        .style('fill', function(d){return labelBgColor(d.data);});\n\n      sTrans.select('text.label-text')\n        .call(updateLabelText, labelTextStyle, function(d){return d.data;});\n\n      selection.exit().remove();\n\n      // Draw path from point on the timeline to the label rectangle\n      var paths = layers.get('main.link').selectAll('path.link')\n        .data(nodes, options.keyFn ? function(d){return options.keyFn(d.data);} : undefined);\n\n      paths.enter().append('path')\n        .classed('link', true)\n        .attr('d', function(d){return renderer.generatePath(d);})\n        .style('stroke', function(d){return linkColor(d.data);})\n        .style('fill', 'none');\n\n      paths.transition()\n        .style('stroke', function(d){return linkColor(d.data);})\n        .attr('d', function(d){return renderer.generatePath(d);});\n\n      paths.exit().remove();\n    }\n\n    function updateLabelText(selection, textStyle, accessor){\n      accessor = accessor ? d3.functor(accessor) : function(d){return d;};\n\n      selection\n        .text(function(d){return options.textFn(accessor(d));})\n        .attr('dy', options.textYOffset)\n        .attr('x', options.labelPadding.left)\n        .attr('y', options.labelPadding.top);\n\n      Object.keys(textStyle).forEach(function(key){\n        var styleFn = textStyle[key];\n        selection.style(key, function(d,i){return styleFn(accessor(d),i);});\n      });\n\n      return selection;\n    }\n\n    function resizeToFit(){\n      var max;\n\n      switch(options.direction){\n        case 'up':\n          max = d3.max(force.nodes(), function(d){return Math.abs(d.y);}) || 0;\n          skeleton.height(max + options.margin.top + options.margin.bottom);\n          break;\n        case 'down':\n          max = d3.max(force.nodes(), function(d){return Math.abs(d.y + d.dy);}) || 0;\n          skeleton.height(max + options.margin.top + options.margin.bottom);\n          break;\n        case 'left':\n          max = d3.max(force.nodes(), function(d){return Math.abs(d.x);}) || 0;\n          skeleton.width(max + options.margin.left + options.margin.right);\n          break;\n        case 'right':\n          max = d3.max(force.nodes(), function(d){return Math.abs(d.x + d.dx);}) || 0;\n          skeleton.width(max + options.margin.left + options.margin.right);\n          break;\n      }\n\n      return skeleton;\n    }\n\n    return skeleton.mixin({\n      axis: axis,\n      visualize: visualize,\n      resizeToFit: resizeToFit\n    });\n  });\n\n  //---------------------------------------------------\n  // END code for this module\n  //---------------------------------------------------\n}));\n\n"],"names":["root","factory","define","amd","exports","require","d3KitTimeline","d3","d3Kit","labella","this","DEFAULT_OPTIONS","left","right","top","bottom","time","scale","undefined","d","text","CUSTOM_EVENTS","createChart","constructor","skeleton","options","dispatch","getDispatcher","layers","getLayerOrganizer","create","main","force","Force","axis","svg","rectWidth","w","rectHeight","h","timePos","timeFn","on","visualize","get","classed","data","domain","extent","nice","range","direction","getInnerHeight","getInnerWidth","axisTransform","orient","attr","call","labelTextStyle","helper","extend","textStyle","keys","forEach","key","functor","fill","labelTextColor","dummyText","append","nodes","map","bbox","updateLabelText","getBBox","width","labelPadding","height","node","Node","remove","compute","drawDots","selection","selectAll","keyFn","field","enter","i","dotClick","dotMouseover","dotMousemove","dotMouseout","style","dotColor","dotRadius","transition","exit","drawLabels","nodeHeight","max","renderer","Renderer","layerGap","layout","nodePos","x","y","dy","dx","labelBgColor","linkColor","sEnter","labelClick","labelMouseover","labelMousemove","labelMouseenter","labelMouseleave","labelMouseout","sTrans","select","paths","generatePath","accessor","textFn","textYOffset","styleFn","resizeToFit","Math","abs","margin","mixin"],"mappings":";;;;;;;;;;;;AAEA;;;AAGC,WAAUA,IAAV,EAAgBC,OAAhB,EAAyB;MACpB,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;;;WAGvC,CAAC,IAAD,EAAO,OAAP,EAAgB,SAAhB,CAAP,EAAmCF,OAAnC;GAHF,MAKK,IAAI,QAAOG,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;;;;;WAK7BA,OAAP,GAAiBH,QAAQI,QAAQ,IAAR,CAAR,EAAuBA,QAAQ,OAAR,CAAvB,EAAyCA,QAAQ,SAAR,CAAzC,CAAjB;GALG,MAOA;;;SAGEC,aAAL,GAAqBL,QAAQD,KAAKO,EAAb,EAAiBP,KAAKQ,KAAtB,EAA6BR,KAAKS,OAAlC,CAArB;;CAhBH,EAkBCC,SAlBD;;AAoBD,UAAUH,EAAV,EAAcC,KAAd,EAAqBC,OAArB,EAA8B;;;;;MAKxBE,kBAAkB;YACZ,EAACC,MAAM,EAAP,EAAWC,OAAO,EAAlB,EAAsBC,KAAK,EAA3B,EAA+BC,QAAQ,EAAvC,EADY;kBAEN,GAFM;mBAGL,GAHK;WAIbR,GAAGS,IAAH,CAAQC,KAAR,EAJa;YAKZC,SALY;eAMT,OANS;eAOT,CAPS;cAQV,EARU;aASX,EATW;WAUbA,SAVa;YAWZ,gBAASC,CAAT,EAAW;aAAQA,EAAEH,IAAT;KAXA;YAYZ,gBAASG,CAAT,EAAW;aAAQA,EAAEC,IAAT;KAZA;cAaV,MAbU;kBAcN,MAdM;oBAeJ,MAfI;eAgBT,MAhBS;kBAiBN,EAACR,MAAM,CAAP,EAAUC,OAAO,CAAjB,EAAoBC,KAAK,CAAzB,EAA4BC,QAAQ,CAApC,EAjBM;iBAkBP;GAlBf;;MAqBIM,gBAAgB,CAClB,UADkB,EAElB,cAFkB,EAGlB,cAHkB,EAIlB,aAJkB,EAKlB,YALkB,EAMlB,gBANkB,EAOlB,gBAPkB,EAQlB,iBARkB,EASlB,iBATkB,EAUlB,eAVkB,CAApB;;SAaOb,MAAMP,OAAN,CAAcqB,WAAd,CAA0BX,eAA1B,EAA2CU,aAA3C,EACP,SAASE,WAAT,CAAqBC,QAArB,EAA8B;;QAExBC,UAAUD,SAASC,OAAT,EAAd;QACIC,WAAWF,SAASG,aAAT,EAAf;QACIC,SAASJ,SAASK,iBAAT,EAAb;;WAEOC,MAAP,CAAc,CAAC,OAAD,EAAU,EAACC,MAAK,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB,EAA0B,KAA1B,CAAN,EAAV,CAAd;;QAEIC,QAAQ,IAAIvB,QAAQwB,KAAZ,CAAkBR,QAAQhB,OAA1B,CAAZ;;QAEIyB,OAAO3B,GAAG4B,GAAH,CAAOD,IAAP,EAAX;;aAESE,SAAT,CAAmBjB,CAAnB,EAAqB;aACZA,EAAEkB,CAAT;;;aAGOC,UAAT,CAAoBnB,CAApB,EAAsB;aACbA,EAAEoB,CAAT;;;aAGOC,OAAT,CAAiBrB,CAAjB,EAAmB;aACVM,QAAQR,KAAR,CAAcQ,QAAQgB,MAAR,CAAetB,CAAf,CAAd,CAAP;;;aAGOuB,EAAT,CAAY,QAAZ,EAAuBC,SAAvB;aACSD,EAAT,CAAY,SAAZ,EAAuBC,SAAvB;aACSD,EAAT,CAAY,MAAZ,EAAoBC,SAApB;;WAEOC,GAAP,CAAW,WAAX,EAAwBC,OAAxB,CAAgC,MAAhC,EAAwC,IAAxC;;aAESF,SAAT,GAAoB;UACdG,OAAOtB,SAASsB,IAAT,MAAmB,EAA9B;;UAEGrB,QAAQsB,MAAX,EAAkB;gBACR9B,KAAR,CAAc8B,MAAd,CAAqBtB,QAAQsB,MAA7B;OADF,MAGI;gBACM9B,KAAR,CAAc8B,MAAd,CAAqBxC,GAAGyC,MAAH,CAAUF,IAAV,EAAgBrB,QAAQgB,MAAxB,CAArB,EACGQ,IADH;;cAGMhC,KAAR,CAAciC,KAAd,CAAoB,CAAC,CAAD,EAAKzB,QAAQ0B,SAAR,KAAoB,MAApB,IAA8B1B,QAAQ0B,SAAR,KAAoB,OAAnD,GAA8D3B,SAAS4B,cAAT,EAA9D,GAA0F5B,SAAS6B,aAAT,EAA9F,CAApB;;WAEKpC,KAAL,CAAWQ,QAAQR,KAAnB;;UAEIqC,aAAJ;;cAEO7B,QAAQ0B,SAAf;aACO,OAAL;eACOI,MAAL,CAAY,MAAZ;0BACgB,eAAc,CAAd,GAAiB,GAAjB,GAAsB,CAAtB,GAAyB,GAAzC;;aAEG,MAAL;eACOA,MAAL,CAAY,OAAZ;0BACe,eAAc/B,SAAS6B,aAAT,EAAd,GAAwC,GAAxC,GAA6C,CAA7C,GAAgD,GAA/D;;aAEG,IAAL;eACOE,MAAL,CAAY,QAAZ;0BACe,eAAc,CAAd,GAAiB,GAAjB,GAAsB/B,SAAS4B,cAAT,EAAtB,GAAiD,GAAhE;;aAEG,MAAL;eACOG,MAAL,CAAY,KAAZ;0BACgB,eAAc,CAAd,GAAiB,GAAjB,GAAsB,CAAtB,GAAyB,GAAzC;;;;aAIGX,GAAP,CAAW,MAAX,EACGY,IADH,CACQ,WADR,EACqBF,aADrB;;aAGOV,GAAP,CAAW,WAAX,EACGa,IADH,CACQvB,IADR;;eAGSY,IAAT;;UAEIY,iBAAiBlD,MAAMmD,MAAN,CAAaC,MAAb,CAAoB,EAApB,EAAwBnC,QAAQoC,SAAhC,CAArB;aACOC,IAAP,CAAYJ,cAAZ,EAA4BK,OAA5B,CAAoC,UAASC,GAAT,EAAa;uBAChCA,GAAf,IAAsBzD,GAAG0D,OAAH,CAAWP,eAAeM,GAAf,CAAX,CAAtB;OADF;;qBAIeE,IAAf,GAAsBR,eAAeQ,IAAf,IAAuB3D,GAAG0D,OAAH,CAAWxC,QAAQ0C,cAAnB,CAA7C;;UAEIC,YAAYxC,OAAOgB,GAAP,CAAW,OAAX,EAAoByB,MAApB,CAA2B,MAA3B,EACbxB,OADa,CACL,YADK,EACS,IADT,CAAhB;;UAGIyB,QAAQxB,KAAKyB,GAAL,CAAS,UAASpD,CAAT,EAAW;YAC1BqD,OAAOJ,UACRX,IADQ,CACHgB,eADG,EACcf,cADd,EAC8BvC,CAD9B,EACiC,CADjC,EACoC,CADpC,EAERuD,OAFQ,EAAX;YAGIrC,IAAImC,KAAKG,KAAL,GAAalD,QAAQmD,YAAR,CAAqBhE,IAAlC,GAAyCa,QAAQmD,YAAR,CAAqB/D,KAAtE;YACI0B,IAAIiC,KAAKK,MAAL,GAAcpD,QAAQmD,YAAR,CAAqB9D,GAAnC,GAAyCW,QAAQmD,YAAR,CAAqB7D,MAAtE;YACI+D,OAAO,IAAIrE,QAAQsE,IAAZ,CACTvC,QAAQrB,CAAR,CADS,EAERM,QAAQ0B,SAAR,KAAoB,MAApB,IAA8B1B,QAAQ0B,SAAR,KAAoB,OAAnD,GAA8DZ,CAA9D,GAAkEF,CAFzD,EAGTlB,CAHS,CAAX;aAKKkB,CAAL,GAASA,CAAT;aACKE,CAAL,GAASA,CAAT;eACOuC,IAAP;OAbU,CAAZ;;gBAgBUE,MAAV;;YAEMvD,OAAN,CAAcA,QAAQhB,OAAtB,EACG6D,KADH,CACSA,KADT,EAEGW,OAFH;;iBAIWjD,MAAMsC,KAAN,EAAX,EAA0BZ,cAA1B;;aAEOlC,QAAP;;;aAGO0D,QAAT,CAAkBpC,IAAlB,EAAuB;UACjBqC,YAAYvD,OAAOgB,GAAP,CAAW,UAAX,EAAuBwC,SAAvB,CAAiC,YAAjC,EACbtC,IADa,CACRA,IADQ,EACFrB,QAAQ4D,KADN,CAAhB;;UAGIC,QAAS7D,QAAQ0B,SAAR,KAAoB,MAApB,IAA8B1B,QAAQ0B,SAAR,KAAoB,OAAnD,GAA8D,IAA9D,GAAqE,IAAjF;;gBAEUoC,KAAV,GAAkBlB,MAAlB,CAAyB,QAAzB,EACGxB,OADH,CACW,KADX,EACkB,IADlB,EAEGH,EAFH,CAEM,OAFN,EAEe,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBAChBC,QAAT,CAAkBtE,CAAlB,EAAqBqE,CAArB;OAHJ,EAKG9C,EALH,CAKM,WALN,EAKmB,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACpBE,YAAT,CAAsBvE,CAAtB,EAAyBqE,CAAzB;OANJ,EAQG9C,EARH,CAQM,WARN,EAQmB,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACpBG,YAAT,CAAsBxE,CAAtB,EAAyBqE,CAAzB;OATJ,EAWG9C,EAXH,CAWM,UAXN,EAWkB,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACnBI,WAAT,CAAqBzE,CAArB,EAAwBqE,CAAxB;OAZJ,EAcGK,KAdH,CAcS,MAdT,EAciBpE,QAAQqE,QAdzB,EAeGtC,IAfH,CAeQ,GAfR,EAea/B,QAAQsE,SAfrB,EAgBGvC,IAhBH,CAgBQ8B,KAhBR,EAgBe9C,OAhBf;;gBAkBUwD,UAAV,GACGH,KADH,CACS,MADT,EACiBpE,QAAQqE,QADzB,EAEGtC,IAFH,CAEQ,GAFR,EAEa/B,QAAQsE,SAFrB,EAGGvC,IAHH,CAGQ8B,KAHR,EAGe9C,OAHf;;gBAKUyD,IAAV,GAAiBjB,MAAjB;;;aAGOkB,UAAT,CAAoB5B,KAApB,EAA2BZ,cAA3B,EAA0C;UACpCyC,UAAJ;UACG1E,QAAQ0B,SAAR,KAAoB,MAApB,IAA8B1B,QAAQ0B,SAAR,KAAoB,OAArD,EAA6D;qBAC9C5C,GAAG6F,GAAH,CAAO9B,KAAP,EAAclC,SAAd,CAAb;OADF,MAGI;qBACW7B,GAAG6F,GAAH,CAAO9B,KAAP,EAAchC,UAAd,CAAb;;;UAGE+D,WAAW,IAAI5F,QAAQ6F,QAAZ,CAAqB;oBACtBH,UADsB;kBAExB1E,QAAQ8E,QAFgB;mBAGvB9E,QAAQ0B;OAHN,CAAf;;eAMSqD,MAAT,CAAgBlC,KAAhB;;eAESmC,OAAT,CAAiBtF,CAAjB,EAAmB;gBACVM,QAAQ0B,SAAf;eACO,OAAL;mBACS,eAAchC,EAAEuF,CAAhB,GAAmB,GAAnB,IAAwBvF,EAAEwF,CAAF,GAAIxF,EAAEyF,EAAF,GAAK,CAAjC,IAAoC,GAA3C;eACG,MAAL;mBACS,gBAAczF,EAAEuF,CAAF,GAAMP,UAAN,GAAmBhF,EAAEkB,CAAnC,IAAsC,GAAtC,IAA2ClB,EAAEwF,CAAF,GAAIxF,EAAEyF,EAAF,GAAK,CAApD,IAAuD,GAA9D;eACG,IAAL;mBACS,gBAAczF,EAAEuF,CAAF,GAAIvF,EAAE0F,EAAF,GAAK,CAAvB,IAA0B,GAA1B,GAA+B1F,EAAEwF,CAAjC,GAAoC,GAA3C;eACG,MAAL;mBACS,gBAAcxF,EAAEuF,CAAF,GAAIvF,EAAE0F,EAAF,GAAK,CAAvB,IAA0B,GAA1B,GAA+B1F,EAAEwF,CAAjC,GAAoC,GAA3C;;;;UAIFG,eAAevG,GAAG0D,OAAH,CAAWxC,QAAQqF,YAAnB,CAAnB;UACIC,YAAYxG,GAAG0D,OAAH,CAAWxC,QAAQsF,SAAnB,CAAhB;;;UAGI5B,YAAYvD,OAAOgB,GAAP,CAAW,YAAX,EAAyBwC,SAAzB,CAAmC,WAAnC,EACbtC,IADa,CACRwB,KADQ,EACD7C,QAAQ4D,KAAR,GAAgB,UAASlE,CAAT,EAAW;eAAQM,QAAQ4D,KAAR,CAAclE,EAAE2B,IAAhB,CAAP;OAA5B,GAA6D5B,SAD5D,CAAhB;;UAGI8F,SAAS7B,UAAUI,KAAV,GAAkBlB,MAAlB,CAAyB,GAAzB,EACVxB,OADU,CACF,SADE,EACS,IADT,EAEVH,EAFU,CAEP,OAFO,EAEE,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBAChByB,UAAT,CAAoB9F,EAAE2B,IAAtB,EAA4B0C,CAA5B;OAHS,EAKV9C,EALU,CAKP,WALO,EAKM,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACpB0B,cAAT,CAAwB/F,EAAE2B,IAA1B,EAAgC0C,CAAhC;OANS,EAQV9C,EARU,CAQP,WARO,EAQM,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACpB2B,cAAT,CAAwBhG,EAAE2B,IAA1B,EAAgC0C,CAAhC;OATS,EAWV9C,EAXU,CAWP,YAXO,EAWO,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACrB4B,eAAT,CAAyBjG,EAAE2B,IAA3B,EAAiC0C,CAAjC;OAZS,EAcV9C,EAdU,CAcP,YAdO,EAcO,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACrB6B,eAAT,CAAyBlG,EAAE2B,IAA3B,EAAiC0C,CAAjC;OAfS,EAiBV9C,EAjBU,CAiBP,UAjBO,EAiBK,UAASvB,CAAT,EAAYqE,CAAZ,EAAc;iBACnB8B,aAAT,CAAuBnG,EAAE2B,IAAzB,EAA+B0C,CAA/B;OAlBS,EAoBVhC,IApBU,CAoBL,WApBK,EAoBQiD,OApBR,CAAb;;aAuBGpC,MADH,CACU,MADV,EAEGxB,OAFH,CAEW,UAFX,EAEuB,IAFvB,EAGGW,IAHH,CAGQ,IAHR,EAGc,CAHd,EAIGA,IAJH,CAIQ,IAJR,EAIc,CAJd,EAKGA,IALH,CAKQ,OALR,EAKiBpB,SALjB,EAMGoB,IANH,CAMQ,QANR,EAMkBlB,UANlB,EAOGuD,KAPH,CAOS,MAPT,EAOiB,UAAS1E,CAAT,EAAW;eAAQ2F,aAAa3F,EAAE2B,IAAf,CAAP;OAP7B;;aASOuB,MAAP,CAAc,MAAd,EACGxB,OADH,CACW,YADX,EACyB,IADzB,EAEGY,IAFH,CAEQgB,eAFR,EAEyBf,cAFzB,EAEyC,UAASvC,CAAT,EAAW;eAAQA,EAAE2B,IAAT;OAFrD;;UAIIyE,SAASpC,UAAUa,UAAV,GACVxC,IADU,CACL,WADK,EACQiD,OADR,CAAb;;aAGOe,MAAP,CAAc,MAAd,EACGhE,IADH,CACQ,OADR,EACiBpB,SADjB,EAEGoB,IAFH,CAEQ,QAFR,EAEkBlB,UAFlB,EAGGuD,KAHH,CAGS,MAHT,EAGiB,UAAS1E,CAAT,EAAW;eAAQ2F,aAAa3F,EAAE2B,IAAf,CAAP;OAH7B;;aAKO0E,MAAP,CAAc,iBAAd,EACG/D,IADH,CACQgB,eADR,EACyBf,cADzB,EACyC,UAASvC,CAAT,EAAW;eAAQA,EAAE2B,IAAT;OADrD;;gBAGUmD,IAAV,GAAiBjB,MAAjB;;;UAGIyC,QAAQ7F,OAAOgB,GAAP,CAAW,WAAX,EAAwBwC,SAAxB,CAAkC,WAAlC,EACTtC,IADS,CACJwB,KADI,EACG7C,QAAQ4D,KAAR,GAAgB,UAASlE,CAAT,EAAW;eAAQM,QAAQ4D,KAAR,CAAclE,EAAE2B,IAAhB,CAAP;OAA5B,GAA6D5B,SADhE,CAAZ;;YAGMqE,KAAN,GAAclB,MAAd,CAAqB,MAArB,EACGxB,OADH,CACW,MADX,EACmB,IADnB,EAEGW,IAFH,CAEQ,GAFR,EAEa,UAASrC,CAAT,EAAW;eAAQkF,SAASqB,YAAT,CAAsBvG,CAAtB,CAAP;OAFzB,EAGG0E,KAHH,CAGS,QAHT,EAGmB,UAAS1E,CAAT,EAAW;eAAQ4F,UAAU5F,EAAE2B,IAAZ,CAAP;OAH/B,EAIG+C,KAJH,CAIS,MAJT,EAIiB,MAJjB;;YAMMG,UAAN,GACGH,KADH,CACS,QADT,EACmB,UAAS1E,CAAT,EAAW;eAAQ4F,UAAU5F,EAAE2B,IAAZ,CAAP;OAD/B,EAEGU,IAFH,CAEQ,GAFR,EAEa,UAASrC,CAAT,EAAW;eAAQkF,SAASqB,YAAT,CAAsBvG,CAAtB,CAAP;OAFzB;;YAIM8E,IAAN,GAAajB,MAAb;;;aAGOP,eAAT,CAAyBU,SAAzB,EAAoCtB,SAApC,EAA+C8D,QAA/C,EAAwD;iBAC3CA,WAAWpH,GAAG0D,OAAH,CAAW0D,QAAX,CAAX,GAAkC,UAASxG,CAAT,EAAW;eAAQA,CAAP;OAAzD;;gBAGGC,IADH,CACQ,UAASD,CAAT,EAAW;eAAQM,QAAQmG,MAAR,CAAeD,SAASxG,CAAT,CAAf,CAAP;OADpB,EAEGqC,IAFH,CAEQ,IAFR,EAEc/B,QAAQoG,WAFtB,EAGGrE,IAHH,CAGQ,GAHR,EAGa/B,QAAQmD,YAAR,CAAqBhE,IAHlC,EAIG4C,IAJH,CAIQ,GAJR,EAIa/B,QAAQmD,YAAR,CAAqB9D,GAJlC;;aAMOgD,IAAP,CAAYD,SAAZ,EAAuBE,OAAvB,CAA+B,UAASC,GAAT,EAAa;YACtC8D,UAAUjE,UAAUG,GAAV,CAAd;kBACU6B,KAAV,CAAgB7B,GAAhB,EAAqB,UAAS7C,CAAT,EAAWqE,CAAX,EAAa;iBAAQsC,QAAQH,SAASxG,CAAT,CAAR,EAAoBqE,CAApB,CAAP;SAAnC;OAFF;;aAKOL,SAAP;;;aAGO4C,WAAT,GAAsB;UAChB3B,GAAJ;;cAEO3E,QAAQ0B,SAAf;aACO,IAAL;gBACQ5C,GAAG6F,GAAH,CAAOpE,MAAMsC,KAAN,EAAP,EAAsB,UAASnD,CAAT,EAAW;mBAAQ6G,KAAKC,GAAL,CAAS9G,EAAEwF,CAAX,CAAP;WAAlC,KAA6D,CAAnE;mBACS9B,MAAT,CAAgBuB,MAAM3E,QAAQyG,MAAR,CAAepH,GAArB,GAA2BW,QAAQyG,MAAR,CAAenH,MAA1D;;aAEG,MAAL;gBACQR,GAAG6F,GAAH,CAAOpE,MAAMsC,KAAN,EAAP,EAAsB,UAASnD,CAAT,EAAW;mBAAQ6G,KAAKC,GAAL,CAAS9G,EAAEwF,CAAF,GAAMxF,EAAEyF,EAAjB,CAAP;WAAlC,KAAoE,CAA1E;mBACS/B,MAAT,CAAgBuB,MAAM3E,QAAQyG,MAAR,CAAepH,GAArB,GAA2BW,QAAQyG,MAAR,CAAenH,MAA1D;;aAEG,MAAL;gBACQR,GAAG6F,GAAH,CAAOpE,MAAMsC,KAAN,EAAP,EAAsB,UAASnD,CAAT,EAAW;mBAAQ6G,KAAKC,GAAL,CAAS9G,EAAEuF,CAAX,CAAP;WAAlC,KAA6D,CAAnE;mBACS/B,KAAT,CAAeyB,MAAM3E,QAAQyG,MAAR,CAAetH,IAArB,GAA4Ba,QAAQyG,MAAR,CAAerH,KAA1D;;aAEG,OAAL;gBACQN,GAAG6F,GAAH,CAAOpE,MAAMsC,KAAN,EAAP,EAAsB,UAASnD,CAAT,EAAW;mBAAQ6G,KAAKC,GAAL,CAAS9G,EAAEuF,CAAF,GAAMvF,EAAE0F,EAAjB,CAAP;WAAlC,KAAoE,CAA1E;mBACSlC,KAAT,CAAeyB,MAAM3E,QAAQyG,MAAR,CAAetH,IAArB,GAA4Ba,QAAQyG,MAAR,CAAerH,KAA1D;;;;aAIGW,QAAP;;;WAGKA,SAAS2G,KAAT,CAAe;YACdjG,IADc;iBAETS,SAFS;mBAGPoF;KAHR,CAAP;GA/RK,CAAP;;;;;CA3DD,CAAD;;;;"}